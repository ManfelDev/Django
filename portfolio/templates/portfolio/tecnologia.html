{% extends 'portfolio/base.html' %}

{% load static %}

{% block main %}
<section class="tech-section" style="max-width: 1000px; margin: 0 auto; text-align: center;">
    <!-- Back Button -->
    <div style="text-align: left; margin-bottom: 30px;">
        <a href="{% url 'portfolio:tecnologias' %}" class="custom-button" style="background: var(--primary-red);">< BACK TO TOOLS</a>
    </div>

    <!-- Technology Title -->
    <h2 style="font-size: 2.5rem; color: var(--primary-gold); margin-bottom: 30px; text-shadow: 3px 3px 0 #000;">{{ tecnologia.nome }}</h2>

    <!-- Technology Logo -->
    <div style="display: flex; justify-content: center; margin-bottom: 30px;">
        <div style="background: white; border-radius: 15px; padding: 30px; border: 3px solid var(--primary-gold); width: 200px; height: 200px; display: flex; justify-content: center; align-items: center;">
            {% if tecnologia.logotipo %}
                <img src="{{ tecnologia.logotipo.url }}" alt="{{ tecnologia.nome }}" style="max-width: 80%; max-height: 80%; object-fit: contain;">
            {% else %}
                <div style="font-size: 4rem; color: var(--primary-gold);">üõ†Ô∏è</div>
            {% endif %}
        </div>
    </div>

    <!-- Technology Description -->
    <div style="background: var(--card-bg); padding: 30px; border-radius: 15px; border: 2px solid var(--primary-gold); margin-bottom: 30px; text-align: left;">
        <h3 style="color: var(--primary-gold); margin-bottom: 20px; font-size: 1.3rem; text-align: center;">ABOUT THIS TECHNOLOGY</h3>
        <p style="font-size: 1rem; line-height: 1.8; text-align: center;">{{ tecnologia.descricao }}</p>
    </div>

    <!-- Official Website Button -->
    {% if tecnologia.link %}
        <div style="margin-bottom: 40px;">
            <a href="{{ tecnologia.link }}" target="_blank" class="custom-button" style="background: var(--primary-blue); font-size: 1rem; padding: 15px 30px;">VISIT OFFICIAL WEBSITE</a>
        </div>
    {% endif %}

    <!-- Projects Using This Technology -->
    {% if tecnologia.projetos.all %}
        <div style="margin-top: 50px;">
            <h3 style="color: var(--primary-red); margin-bottom: 30px; font-size: 1.8rem;">PROJECTS USING {{ tecnologia.nome|upper }}</h3>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                {% for projeto in tecnologia.projetos.all %}
                    <a href="{% url 'portfolio:projeto_path' projeto_id=projeto.id %}" 
                       style="position: relative; background: var(--card-bg); border-radius: 10px; overflow: hidden; border: 2px solid #444; text-decoration: none; transition: all 0.3s; display: block; height: 150px;"
                       onmouseover="this.style.borderColor='var(--primary-gold)'; this.style.transform='translateY(-5px)'"
                       onmouseout="this.style.borderColor='#444'; this.style.transform='translateY(0)'">
                        
                        {% if projeto.imagens.first %}
                            <img src="{{ projeto.imagens.first.imagem.url }}" alt="{{ projeto.titulo }}" 
                                 style="width: 100%; height: 100%; object-fit: cover; transition: transform 0.3s;"
                                 onmouseover="this.style.transform='scale(1.1)'" 
                                 onmouseout="this.style.transform='scale(1)'">
                        {% else %}
                            <div style="width: 100%; height: 100%; background: linear-gradient(45deg, var(--card-bg), #1f2937); display: flex; align-items: center; justify-content: center; color: var(--primary-gold); font-size: 2rem;">üéÆ</div>
                        {% endif %}
                        
                        <!-- Project Title Overlay -->
                        <div style="position: absolute; bottom: 0; left: 0; right: 0; background: linear-gradient(transparent, rgba(0,0,0,0.8)); padding: 15px 10px 10px; color: white;">
                            <div style="font-size: 0.9rem; font-weight: bold; text-align: center; color: var(--primary-gold);">{{ projeto.titulo }}</div>
                        </div>
                        
                        <!-- Hover Effect Overlay -->
                        <div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.3); opacity: 1; transition: opacity 0.3s;"
                             onmouseover="this.style.opacity='0'" 
                             onmouseout="this.style.opacity='1'"></div>
                    </a>
                {% endfor %}
            </div>
        </div>
    {% else %}
        <div style="background: var(--card-bg); padding: 40px; border-radius: 15px; border: 2px solid #444; margin-top: 40px;">
            <h3 style="color: var(--primary-gold); margin-bottom: 15px;">NO PROJECTS YET</h3>
            <p style="font-size: 1rem;">This technology hasn't been used in any projects yet, but stay tuned!</p>
            <div style="font-size: 3rem; margin-top: 20px;">üöß</div>
        </div>
    {% endif %}
</section>

<!-- Admin Edit Button -->
{% if request.user.is_authenticated %}
    <div style="text-align: center; margin-top: 40px;">
        <a href="{% url 'portfolio:edita_tecnologia' tecnologia.id %}" class="custom-button" style="background: var(--accent-teal);">EDIT TECHNOLOGY</a>
    </div>
{% endif %}

<style>
@media (max-width: 768px) {
    .tech-section {
        padding: 0 15px;
    }
    
    h2 {
        font-size: 1.8rem;
    }
    
    .tech-section > div:first-of-type {
        width: 150px;
        height: 150px;
        padding: 20px;
    }
    
    .tech-section > div:first-of-type div {
        font-size: 3rem;
    }
}
</style>
{% endblock %}