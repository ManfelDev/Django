{% extends 'portfolio/base.html' %}

{% load static %}
{% block extra_styles %}
<link rel="stylesheet" href="{% static 'css_portfolio/projeto.css' %}">
<link rel="stylesheet" href="{% static 'css_portfolio/apis.css' %}">
{% endblock %}

{% block main %}
<section class="project-section">
    <h2 class="project-title">{{ dados.nome }}</h2>
    
    <div class="external-api-info" style="margin-bottom: 30px;">
        <p><strong>Data Source:</strong> External RESTful API</p>
        <p><strong>API Endpoint:</strong> <a href="https://a22202884.pw.deisi.ulusofona.pt/bandas/api/bandas/{{ dados.id }}/" target="_blank"><code>GET /api/bandas/{{ dados.id }}/</code></a></p>
        <p>This page demonstrates fetching detailed information about a specific band from an external API using individual resource endpoints.</p>
    </div>
    
    {% if dados.foto %}
        <div style="display: flex; justify-content: center; margin-bottom: 30px;">
            <div style="position: relative; max-width: 400px;">
                <img src="{{ dados.foto }}" alt="{{ dados.nome }}" style="width: 100%; max-height: 400px; object-fit: cover; border-radius: 15px; border: 2px solid #bb86fc;">
                <div style="position: absolute; bottom: 10px; right: 10px; background-color: rgba(31, 27, 36, 0.9); padding: 5px 10px; border-radius: 8px; font-size: 0.8em;">
                    <span style="color: #bb86fc;">ðŸ“· External API Image</span>
                </div>
            </div>
        </div>
    {% endif %}

    <div style="max-width: 800px; margin: 0 auto;">
        <div class="project-final-box">
            <div class="project-info-item">
                <p><strong>Band Name:</strong> {{ dados.nome }}</p>
            </div>
            <div class="project-info-item">
                <p><strong>Number of Members:</strong> {{ dados.nr_elementos }}</p>
            </div>
            <div class="project-info-item">
                <p><strong>Year Created:</strong> {{ dados.ano_criacao }}</p>
            </div>
            <div class="project-info-item">
                <p><strong>Band ID:</strong> {{ dados.id }}</p>
            </div>
            {% if dados.foto %}
                <div class="project-info-item">
                    <p><strong>Photo URL:</strong> <a href="{{ dados.foto }}" target="_blank" style="color: #bb86fc;">{{ dados.foto|truncatechars:50 }}</a></p>
                </div>
            {% endif %}
        </div>
    </div>

    <div class="button-wrapper" style="margin-top: 30px; gap: 15px;">
        <a href="{% url 'portfolio:bandas_externas' %}" class="custom-button">Back to Bands List</a>
        <a href="{% url 'portfolio:editar_banda_externa' dados.id %}" class="custom-button">Edit Band</a>
        <a href="{% url 'portfolio:apagar_banda_externa' dados.id %}" class="custom-button danger-button" onclick="return confirm('Are you sure you want to delete this band? This action will send a DELETE request to the external API.')">Delete Band</a>
    </div>
</section>
{% endblock %}